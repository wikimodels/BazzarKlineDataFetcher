import os
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env —Ñ–∞–π–ª–∞, —á—Ç–æ–±—ã os.environ –∏—Ö "—É–≤–∏–¥–µ–ª"
load_dotenv()

# ============================================================================
# === –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Redis (Upstash) ===
# ============================================================================
UPSTASH_REDIS_URL = os.environ.get("UPSTASH_REDIS_URL")
UPSTASH_REDIS_TOKEN = os.environ.get("UPSTASH_REDIS_TOKEN")

# ============================================================================
# === –ö–ª—é—á–∏ –û—á–µ—Ä–µ–¥–∏ –∏ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –í–æ—Ä–∫–µ—Ä–∞ ===
# ============================================================================
# --- –ò–ó–ú–ï–ù–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω —Å—É—Ñ—Ñ–∏–∫—Å –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –≤—Å–µ—Ö 4-—Ö –¢–§ ---
REDIS_TASK_QUEUE_KEY = "data_collector_task_queue_4h_8h_12h_1d"
WORKER_LOCK_KEY = "data_collector_lock_4h_8h_12h_1d"
# -----------------------------------------------------------

WORKER_LOCK_VALUE = "processing" 
WORKER_LOCK_TIMEOUT_SECONDS = 1800 # 30 –º–∏–Ω—É—Ç

# ============================================================================
# === –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API (–≠—Ç–æ–≥–æ –°–µ—Ä–≤–µ—Ä–∞) ===
# ============================================================================
SECRET_TOKEN = os.environ.get("SECRET_TOKEN")

# --- –ù–û–í–ê–Ø –ö–û–ù–°–¢–ê–ù–¢–ê: –ì–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ ---
# ACTIVE_TIMEFRAME_PAIR = "12H_1D" # –£—Å—Ç–∞–Ω–æ–≤–∏–º –Ω–∞ 12h->1d –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–µ—Å—Ç–∞
ACTIVE_TIMEFRAME_PAIR = "12H_1D" # –£—Å—Ç–∞–Ω–æ–≤–∏–º –Ω–∞ 12h->1d –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ç–µ—Å—Ç–∞
# -------------------------------------------------------------------

# --- –ò–ó–ú–ï–ù–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã 12h –∏ 1d ---
POST_TIMEFRAMES = ['1h','4h', '8h', '12h', '1d']
ALLOWED_CACHE_KEYS = ['1h','4h', '8h', '12h', '1d']
# ... (–ø–æ—Å–ª–µ ALLOWED_CACHE_KEYS)

# --- –ù–û–í–ê–Ø –ö–û–ù–°–¢–ê–ù–¢–ê: –¢–§ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–µ–∑–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–≤–µ—á–∏ ---
TIMEFRAMES_TO_TRIM = ['1h', '4h', '12h'] 
# -------------------------------------------------------------------
# --- –ò–ó–ú–ï–ù–ï–ù–û: –ê–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–µ –∏–º—è –¥–ª—è –ª–∏–º–∏—Ç–∞ –±–∞–∑–æ–≤–æ–≥–æ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞ ---
KLINES_LIMIT_BASE_TF = 801
# -------------------------------------------------------------------
KLINES_LIMIT_1H = 401 
# ============================================================================
# === –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ò—Å—Ç–æ—á–Ω–∏–∫–∞ –ú–æ–Ω–µ—Ç (Coin Sifter API) ===
# ============================================================================
COIN_SIFTER_BASE_URL = os.environ.get("COIN_SIFTER_URL")
COIN_SIFTER_API_TOKEN = os.environ.get("SECRET_TOKEN")
COIN_SIFTER_ENDPOINT_PATH = "/coins/formatted-symbols"

COIN_PROCESSING_LIMIT = 250
# ============================================================================


# ============================================================================
# === –£—Å—Ç–∞—Ä–µ–≤—à–µ–µ (Legacy) ===
# ============================================================================
DATABASE_URL = os.environ.get("DATABASE_URL")
# --- –£–î–ê–õ–ï–ù–û: TG_BOT_TOKEN_KEY, TG_USER_KEY ---
CONCURRENCY_LIMIT = 7

# --- üöÄ –ù–ê–ß–ê–õ–û –ò–ó–ú–ï–ù–ï–ù–ò–Ø (–ú–∏–≥—Ä–∞—Ü–∏—è –ê–ª–µ—Ä—Ç–æ–≤) ---
TG_BOT_TOKEN_KEY = os.environ.get("TG_BOT_TOKEN")
TG_USER_KEY = os.environ.get("TG_USER")