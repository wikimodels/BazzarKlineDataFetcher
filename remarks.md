. Run the Server
In your first terminal:

Bash

npm run dev
(Wait for it to log üöÄ [SERVER] –£—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω...)

2. Run the Test
   In a second, separate terminal:

Bash

npx ts-node test-api.ts

–û–±—ä—è—Å–Ω–µ–Ω–∏–µ: –õ–æ–≤—É—à–∫–∞ NODE_ENV=production

–ü—Ä–∏–≤–µ—Ç! –ü—Ä–æ–±–ª–µ–º–∞, —Å –∫–æ—Ç–æ—Ä–æ–π –º—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å ‚Äî –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö —á–∞—Å—Ç—ã—Ö "–ª–æ–≤—É—à–µ–∫" –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ Node.js/TypeScript –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–∏ –≤—Ä–æ–¥–µ Render –∏–ª–∏ Heroku.

–í–æ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ.

1. –í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞: dependencies vs devDependencies

–í —Ç–≤–æ–µ–º —Ñ–∞–π–ª–µ package.json –µ—Å—Ç—å –¥–≤–∞ —Ç–∏–ø–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

dependencies (–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏):

–≠—Ç–æ –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã —Ç–≤–æ–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –¥–ª—è —Ä–∞–±–æ—Ç—ã (–≤ production).

–ü—Ä–∏–º–µ—Ä—ã: express, node-fetch, @upstash/redis.

–ë–µ–∑ –Ω–∏—Ö npm start –ø—Ä–æ—Å—Ç–æ –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è.

devDependencies (–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏):

–≠—Ç–æ –ø–∞–∫–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Å–±–æ—Ä–∫–∏ (build) –ø—Ä–æ–µ–∫—Ç–∞.

–ü—Ä–∏–º–µ—Ä—ã: typescript, ts-node, –∏, —á—Ç–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ, @types/node, @types/express, @types/node-fetch.

–û–Ω–∏ –Ω–µ –Ω—É–∂–Ω—ã —É–∂–µ —Å–æ–±—Ä–∞–Ω–Ω–æ–º—É JavaScript-–∫–æ–¥—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞.

2. –ß—Ç–æ —Ç–∞–∫–æ–µ NODE_ENV?

NODE_ENV ‚Äî —ç—Ç–æ —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ Node.js. –û–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç, –≤ –∫–∞–∫–æ–º —Ä–µ–∂–∏–º–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

NODE_ENV = 'development' (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

NODE_ENV = 'production': "–ë–æ–µ–≤–æ–π" —Ä–µ–∂–∏–º.

3. –í —á–µ–º "–ª–æ–≤—É—à–∫–∞"? (–ö–∞–∫ NODE_ENV –≤—Å—ë –ª–æ–º–∞–µ—Ç)

–ö–æ–≥–¥–∞ npm install –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –æ–Ω —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é NODE_ENV.

–ï—Å–ª–∏ NODE_ENV —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ production, npm install –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò –ü–†–û–ü–£–°–ö–ê–ï–¢ —É—Å—Ç–∞–Ω–æ–≤–∫—É –í–°–ï–• devDependencies!

–≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏: "–±–æ–µ–≤–æ–º—É" —Å–µ—Ä–≤–µ—Ä—É –Ω–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å typescript –∏–ª–∏ –ø–∞–∫–µ—Ç—ã —Å —Ç–∏–ø–∞–º–∏, –≤–µ–¥—å –æ–Ω –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π .js –∫–æ–¥.

4. "–õ–æ–≤—É—à–∫–∞-22" —Ç–≤–æ–µ–≥–æ –¥–µ–ø–ª–æ—è –Ω–∞ Render

–ù–∞ Render (–∏ –ø–æ—Ö–æ–∂–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö) –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —à–∞–≥–æ–≤:

–®–∞–≥ –°–±–æ—Ä–∫–∏ (Build Step): –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ npm run build (–∫–æ—Ç–æ—Ä–∞—è —É —Ç–µ–±—è –∑–∞–ø—É—Å–∫–∞–µ—Ç tsc ‚Äî –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä TypeScript).

–®–∞–≥ –ó–∞–ø—É—Å–∫–∞ (Start Step): –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è npm start (–∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—É—Å–∫–∞–µ—Ç node dist/server.js).

–¢–µ–ø–µ—Ä—å —Å–º–æ—Ç—Ä–∏, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ —É —Ç–µ–±—è:

–¢—ã (–∏–ª–∏ Render –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) —É—Å—Ç–∞–Ω–æ–≤–∏–ª NODE_ENV=production –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö "Environment".

Render –Ω–∞—á–∏–Ω–∞–ª –®–∞–≥ –°–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞–ª npm install.

npm install –≤–∏–¥–µ–ª NODE_ENV=production –∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª @types/node, @types/express –∏ @types/node-fetch (–≤–µ–¥—å –æ–Ω–∏ –≤ devDependencies).

–°—Ä–∞–∑—É –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ Render –∑–∞–ø—É—Å–∫–∞–ª npm run build (—Ç.–µ. tsc).

–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä TypeScript (tsc) –Ω–∞—á–∏–Ω–∞–ª —á–∏—Ç–∞—Ç—å —Ç–≤–æ–π –∫–æ–¥ (server.ts, redis-store.ts...) –∏ –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ —Ç–∏–ø—ã:

"Cannot find name 'process'" (–û–Ω –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ, —Ç.–∫. –Ω–µ—Ç @types/node)

"Cannot find name 'Buffer'" (–¢–æ –∂–µ —Å–∞–º–æ–µ)

"Could not find... 'express'" (–¢–æ –∂–µ —Å–∞–º–æ–µ, –Ω–µ—Ç @types/express)

–°–±–æ—Ä–∫–∞ –ø–∞–¥–∞–ª–∞ —Å –æ—à–∏–±–∫–∞–º–∏.

–¢–≤–æ–π –∫–æ–¥ –Ω–µ –¥–æ—Ö–æ–¥–∏–ª –¥–∞–∂–µ –¥–æ –®–∞–≥–∞ –ó–∞–ø—É—Å–∫–∞.

–†–µ—à–µ–Ω–∏–µ

–†–µ—à–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å NODE_ENV=production –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Environment) –≤ Render.

–ß—Ç–æ —ç—Ç–æ –º–µ–Ω—è–µ—Ç:

Render –∑–∞–ø—É—Å–∫–∞–µ—Ç npm install.

NODE_ENV –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, npm –¥—É–º–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ "development" —Ä–µ–∂–∏–º.

npm —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –í–°–ï, –≤–∫–ª—é—á–∞—è dependencies –ò devDependencies (—Ç–µ–ø–µ—Ä—å @types/node –Ω–∞ –º–µ—Å—Ç–µ).

Render –∑–∞–ø—É—Å–∫–∞–µ—Ç npm run build (tsc).

tsc –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Ç–∏–ø—ã (process, Buffer, express...) –∏ —É—Å–ø–µ—à–Ω–æ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Ç–≤–æ–π –∫–æ–¥ –≤ –ø–∞–ø–∫—É dist.

–°–±–æ—Ä–∫–∞ –ó–∞–≤–µ—Ä—à–µ–Ω–∞!

Render –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –®–∞–≥—É –ó–∞–ø—É—Å–∫–∞ (npm start). –ò –≤–æ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–ø–µ—Ä—å Render —Å–∞–º —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç NODE_ENV=production –¥–ª—è —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–ö–æ—Ä–æ—Ç–∫–æ: devDependencies (–∫–∞–∫ @types/node) –Ω–µ –Ω—É–∂–Ω—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–æ –æ–Ω–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω—É–∂–Ω—ã –¥–ª—è –µ–≥–æ —Å–±–æ—Ä–∫–∏ (–∫–æ–º–ø–∏–ª—è—Ü–∏–∏ TypeScript).
